<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DineKɔ - Payment</title>
    <link rel="stylesheet" href="payment.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="logo">DineKɔ</div>
        <nav>
            <a href="home.html">Home</a>
            <a href="cart.html">Cart</a>
        </nav>
    </header>

    <!-- Payment Form Section -->
    <div class="payment-container">
        <form id="payment-form" class="payment-form">
            <h2>Complete Your Payment</h2>

            <!-- Credit Card / PayPal Fields -->
            <div id="credit-paypal-fields">
                <div class="form-group">
                    <label for="name">Name on Card</label>
                    <input type="text" id="name" name="name" placeholder="Enter the name on the card" required>
                </div>
                <div class="form-group">
                    <label for="card-number">Card Number</label>
                    <input type="text" id="card-number" name="card-number" placeholder="1234 5678 9876 5432" pattern="\d{4} \d{4} \d{4} \d{4}" title="Please enter a valid card number in the format: 1234 5678 9876 5432" required>
                </div>
                <div class="form-group">
                    <label for="expiry-date">Expiry Date</label>
                    <input type="month" id="expiry-date" name="expiry-date" placeholder="MM/YYYY" required>
                </div>
                
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" name="cvv" placeholder="123" pattern="\d{3}" title="Please enter a 3-digit CVV" required>
                </div>
            </div>

            <!-- Mobile Money Fields -->
            <div id="mobile-money-fields" style="display: none;">
                <div class="form-group">
                    <label for="mobile-name">Name</label>
                    <input type="text" id="mobile-name" name="mobile-name" placeholder="Enter your name" required>
                </div>
                <div class="form-group">
                    <label for="phone-number">Phone Number</label>
                    <input type="tel" id="phone-number" name="phone-number" placeholder="e.g. 024 123 4567" pattern="(\d{3} \d{3} \d{4})" title="Please enter a valid phone number in the format: 024 123 4567" required>
                </div>
            </div>

            <!-- Payment Method Selection -->
            <div class="form-group">
                <label for="payment-method">Payment Method</label>
                <input type="radio" id="credit" name="payment-method" value="Credit Card" checked> Credit Card
                <input type="radio" id="paypal" name="payment-method" value="PayPal"> PayPal
                <input type="radio" id="mobile-money" name="payment-method" value="Mobile Money"> Mobile Money
            </div>
            <button type="submit">Pay Now</button>
        </form>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="success-message">
        Payment has been successfully processed! Thank you for your purchase.
    </div>

    <script>
        // Toggle fields based on payment method selected
        const paymentMethods = document.querySelectorAll('input[name="payment-method"]');
        const creditPaypalFields = document.getElementById('credit-paypal-fields');
        const mobileMoneyFields = document.getElementById('mobile-money-fields');

        paymentMethods.forEach(method => {
            method.addEventListener('change', function() {
                if (this.value === 'Mobile Money') {
                    creditPaypalFields.style.display = 'none';
                    mobileMoneyFields.style.display = 'block';
                } else {
                    creditPaypalFields.style.display = 'block';
                    mobileMoneyFields.style.display = 'none';
                }
            });
        });

        // Simulate payment process
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            if (cartItems.length === 0) {
                alert('Your cart is empty. Please add items before proceeding.');
                return;
            }

            // Calculate total payment amount
            const totalAmount = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;

            if (paymentMethod === 'Mobile Money') {
                const mobileName = document.getElementById('mobile-name').value;
                const phoneNumber = document.getElementById('phone-number').value;
                alert(`Payment of $${totalAmount.toFixed(2)} has been successfully processed using Mobile Money with ${mobileName} and phone number ${phoneNumber}!`);
            } else {
                alert(`Payment of $${totalAmount.toFixed(2)} has been successfully processed using ${paymentMethod}!`);
            }

            // Show success message and hide the form
            document.getElementById('success-message').style.display = 'block';
            document.getElementById('payment-form').style.display = 'none';

            // Clear the cart after successful payment
            localStorage.removeItem('cartItems');

            // Redirect to home page after 3 seconds
            setTimeout(() => {
                window.location.href = 'home.html';
            }, 3000);
        });
    </script>
</body>
</html>
